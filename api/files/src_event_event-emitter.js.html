<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/event/event-emitter.js - Parcela</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="Parcela"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Event.html">Event</a></li>
            
                <li><a href="../classes/Event.Emitter.html">Event.Emitter</a></li>
            
                <li><a href="../classes/Event.Listener.html">Event.Listener</a></li>
            
                <li><a href="../classes/Function.html">Function</a></li>
            
                <li><a href="../classes/IO.html">IO</a></li>
            
                <li><a href="../classes/Object.html">Object</a></li>
            
                <li><a href="../classes/Parcel.html">Parcel</a></li>
            
                <li><a href="../classes/Parcel.EventListener.html">Parcel.EventListener</a></li>
            
                <li><a href="../classes/Parcel.Listener.html">Parcel.Listener</a></li>
            
                <li><a href="../classes/Parcela.html">Parcela</a></li>
            
                <li><a href="../classes/Promise.html">Promise</a></li>
            
                <li><a href="../classes/Router.html">Router</a></li>
            
                <li><a href="../classes/Utils.html">Utils</a></li>
            
                <li><a href="../classes/vDOM.html">vDOM</a></li>
            
                <li><a href="../classes/vNode.html">vNode</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/core.html">core</a></li>
            
                <li><a href="../modules/core-routing.html">core-routing</a></li>
            
                <li><a href="../modules/event.html">event</a></li>
            
                <li><a href="../modules/event-dom.html">event-dom</a></li>
            
                <li><a href="../modules/event-emitter.html">event-emitter</a></li>
            
                <li><a href="../modules/event-hammerjs.html">event-hammerjs</a></li>
            
                <li><a href="../modules/event-listener.html">event-listener</a></li>
            
                <li><a href="../modules/io.html">io</a></li>
            
                <li><a href="../modules/io-assets.html">io-assets</a></li>
            
                <li><a href="../modules/io-cors.html">io-cors</a></li>
            
                <li><a href="../modules/io-jsonp.html">io-jsonp</a></li>
            
                <li><a href="../modules/io-node.html">io-node</a></li>
            
                <li><a href="../modules/io-transfer.html">io-transfer</a></li>
            
                <li><a href="../modules/io-win.html">io-win</a></li>
            
                <li><a href="../modules/io-xml.html">io-xml</a></li>
            
                <li><a href="../modules/Object.html">Object</a></li>
            
                <li><a href="../modules/parcel.html">parcel</a></li>
            
                <li><a href="../modules/parcel-event-listener.html">parcel-event-listener</a></li>
            
                <li><a href="../modules/Parcela.html">Parcela</a></li>
            
                <li><a href="../modules/Promise.html">Promise</a></li>
            
                <li><a href="../modules/promise-ext.html">promise-ext</a></li>
            
                <li><a href="../modules/utils.html">utils</a></li>
            
                <li><a href="../modules/virtual-dom.html">virtual-dom</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/event/event-emitter.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&quot;use strict&quot;;

/**
 * Extends the Event-instance by adding the method &#x60;Emitter&#x60; to it.
 * The &#x60;Emitter-method&#x60; returns an object that should be merged into any Class-instance or object you
 * want to extend with the emit-methods, so the appropriate methods can be invoked on the instance.
 *
 * &lt;i&gt;Copyright (c) 2014 Parcela - https://github.com/Parcela&lt;/i&gt;
 * New BSD License - https://github.com/ItsAsbreuk/itsa-library/blob/master/LICENSE
 *
 * Should be called using  the provided &#x60;extend&#x60;-method like this:
 * @example
 *     var Event = require(&#x27;event&#x27;);&lt;br&gt;
 *     var EventEmitter = require(&#x27;event-emitter&#x27;);&lt;br&gt;
 *     EventEmitter.mergeInto(Event);
 *
 * @module event
 * @submodule event-emitter
 * @class Event.Emitter
 * @since 0.0.1
*/

var NAME = &#x27;[event-emitter]: &#x27;,
    REGEXP_EMITTER = /^(\w|-)+$/,

createEmitter = {
    mergeInto: function (instanceEvent) {
        /**
         * Creates an object which holds all event-emission methods.
         * The returned object should be merged into any Class-instance or object you want to
         * extend with the emit-methods, so the appropriate methods can be invoked on the instance.
         *
         * See [Event.Emitter](Event.Emitter.html) for all properties that can be merged.
         *
         * @example
         *     var greenObject = {};
         *     greenObject.merge(Event.Emitter(&#x27;green&#x27;));
         *     greenObject.emit(&#x27;save&#x27;); // --&gt; emits the customEvent &#x60;green:save&#x60;
         *
         * @example
         *     Profile.mergePrototypes(Event.Emitter(&#x27;PersonalProfile&#x27;));
         *     var myProfile = new Profile({name: Marco});
         *     myProfile.emit(&#x27;save&#x27;); // --&gt; emits the customEvent &#x60;PersonalProfile:save&#x60;
         *
         * @for Event
         * @method Emitter
         * @param emitterName {String} the Event-instance that is responsible for the event-system.
         *        Should be an instance created by the class provided by &#x60;core-custom-event&#x60;
         * @return {Object} with the methods which should be merged inside an instance.
         * @since 0.0.1
         */

        /**
         * This object should be merged into any Class-instance or object that you want to provide
         * event-emitter methods. This way, the appropriate methods can be invoked on the instance.
         * instead of using the static Event-methods.
         *
         * When merging, you need to merge a method with the &#x60;emitterName&#x60; as its only argument. f.e:
         * Event.Emitter(&#x27;PersonalProfile&#x27;)
         *
         * It is highly recommendable to merge on the prototype instead of the instance. See the docs.
         *
         * @class Event.Emitter
         *
        */
        instanceEvent.Emitter = function(emitterName) {
            var composeCustomevent = function(eventName) {
                    return emitterName+&#x27;:&#x27;+eventName;
                },
                newEmitter;
            if (!REGEXP_EMITTER.test(emitterName)) {
                console.error(NAME, &#x27;Emitter invoked with invalid argument: you must specify a valid emitterName&#x27;);
                return;
            }
            newEmitter = {
                /**
                 * Defines a CustomEvent. If the eventtype already exists, it will not be overridden,
                 * unless you force to assign with &#x60;.forceAssign()&#x60;
                 *
                 * The returned object comes with 4 methods which can be invoked chainable:
                 *
                 * &lt;ul&gt;
                 *     &lt;li&gt;defaultFn() --&gt; the default-function of the event&lt;/li&gt;
                 *     &lt;li&gt;preventedFn() --&gt; the function that should be invoked when the event is defaultPrevented&lt;/li&gt;
                 *     &lt;li&gt;forceAssign() --&gt; overrides any previous definition&lt;/li&gt;
                 *     &lt;li&gt;unHaltable() --&gt; makes the customEvent cannot be halted&lt;/li&gt;
                 *     &lt;li&gt;unPreventable() --&gt; makes the customEvent&#x27;s defaultFn cannot be prevented&lt;/li&gt;
                 *     &lt;li&gt;unSilencable() --&gt; makes that emitters cannot make this event to perform silently (using e.silent)&lt;/li&gt;
                 *     &lt;li&gt;unRenderPreventable() --&gt; makes that the customEvent&#x27;s render cannot be prevented&lt;/li&gt;
                 *     &lt;li&gt;noRender() --&gt; prevents this customEvent from render the dom. Overrules unRenderPreventable()&lt;/li&gt;
                 * &lt;/ul&gt;
                 *
                 * @method defineEvent
                 * @param eventName {String} name of the customEvent, without &#x60;emitterName&#x60;.
                 *        The final event that will be created has the syntax: &#x60;emitterName:eventName&#x60;,
                 *        where &#x60;emitterName:&#x60; is automaticly prepended.
                 * @return {Object} with extra methods that can be chained:
                 * &lt;ul&gt;
                 *      &lt;li&gt;unPreventable() --&gt; makes the customEvent&#x27;s defaultFn cannot be prevented&lt;/li&gt;
                 *      &lt;li&gt;unRenderPreventable() --&gt; makes that the customEvent&#x27;s render cannot be prevented&lt;/li&gt;
                 *      &lt;li&gt;forceAssign() --&gt; overrides any previous definition&lt;/li&gt;
                 *      &lt;li&gt;defaultFn() --&gt; the default-function of the event&lt;/li&gt;
                 *      &lt;li&gt;preventedFn() --&gt; the function that should be invoked when the event is defaultPrevented&lt;/li&gt;
                 * &lt;/ul&gt;
                 * @since 0.0.1
                 */
                defineEvent: function (eventName) {
                    return instanceEvent.defineEvent(composeCustomevent(eventName));
                },

                /**
                 * Emits the event &#x60;eventName&#x60; on behalf of the instance holding this method.
                 *
                 * @method emit
                 * @param eventName {String} name of the event to be sent (available as e.type)
                 *        you could pass a customEvent here &#x27;emitterName:eventName&#x27;, which would
                 *        overrule the &#x60;instance-emitterName&#x60;
                 * @param payload {Object} extra payload to be added to the event-object
                 * @return {Promise}
                 * &lt;ul&gt;
                 *     &lt;li&gt;on success: returnValue {Any} of the defaultFn&lt;/li&gt;
                 *     &lt;li&gt;on error: reason {Any} Either: description &#x27;event was halted&#x27;, &#x27;event was defaultPrevented&#x27; or the returnvalue of the preventedFn&lt;/li&gt;
                 * &lt;/ul&gt;
                 * @since 0.0.1
                 */
                emit: function(eventName, payload) {
                    return instanceEvent.emit(this, eventName, payload);
                },

                /**
                 * Removes all event-definitions of the instance holding this method.
                 *
                 * @method undefAllEvents
                 * @since 0.0.1
                 */
                undefAllEvents: function () {
                    instanceEvent.undefEvent(emitterName);
                },

                /**
                 * Removes the event-definition of the specified customEvent.
                 *
                 * @method undefEvent
                 * @param eventName {String} name of the customEvent, without &#x60;emitterName&#x60;.
                 *        The calculated customEvent which will be undefined, will have the syntax: &#x60;emitterName:eventName&#x60;.
                 *        where &#x60;emitterName:&#x60; is automaticly prepended.
                 * @since 0.0.1
                 */
                undefEvent: function (eventName) {
                    instanceEvent.undefEvent(composeCustomevent(eventName));
                }

            };
            // register the emittername:
            instanceEvent.defineEmitter(newEmitter, emitterName);
            return newEmitter;
        };
    }
};

module.exports = createEmitter;
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
